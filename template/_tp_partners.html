<section class="keypageall">
    <div class="keypage_block">
        <h1 class="keypagetext">พันธมิตรร่วมเพาะพันธุ์ปัญญา</h1>
    </div>
</section>
<div data-current="Tab 3" data-easing="ease" data-duration-in="300" data-duration-out="100" class="tabs w-tabs">
    <div class="tabsmart w-tab-menu">
        <a data-w-tab="Tab 3" class="generation w-inline-block w-tab-link w--current">
            <div class="generationtext">ทั้งหมด</div>
        </a>
        <!-- START BLOCK : TABYEAR -->
        <a data-w-tab="Tab {tabID}" class="generation w-inline-block w-tab-link">
            <div class="generationtext">{campNameYear}</div>
        </a>
        <!-- START BLOCK : TABYEAR -->





    </div>

    <div class="w-tab-content">
        <div data-w-tab="Tab 3" class="tabpane w-tab-pane w--tab-active">
            <div style="height: 50px;"></div>
            <div class="partnercontainer">
                <div class="w-layout-blockcontainer partnergridlist w-container">
                    <div class="grid-container-logo" id="a">

                        <!-- START BLOCK : LOGOBRANDS -->
                        <a href="{brandUrl}" class="flex-item-logo"><img src="{main_url}/upload/logo_brand/{brandImg}"></a>
                        <!-- END BLOCK : LOGOBRANDS -->

                    </div>

                    <div class="buttons">
                        <a href="#" class="button-link" onclick="filterByLetter('ก'); return false;">ก</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ข'); return false;">ข</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ค'); return false;">ค</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ง'); return false;">ง</a>
                        <a href="#" class="button-link" onclick="filterByLetter('จ'); return false;">จ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ฉ'); return false;">ฉ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ช'); return false;">ช</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ซ'); return false;">ซ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ฌ'); return false;">ฌ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ญ'); return false;">ญ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ฎ'); return false;">ฎ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ฏ'); return false;">ฏ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ฐ'); return false;">ฐ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ฑ'); return false;">ฑ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ฒ'); return false;">ฒ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ณ'); return false;">ณ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ด'); return false;">ด</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ต'); return false;">ต</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ถ'); return false;">ถ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ท'); return false;">ท</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ธ'); return false;">ธ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('น'); return false;">น</a>
                        <a href="#" class="button-link" onclick="filterByLetter('บ'); return false;">บ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ป'); return false;">ป</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ผ'); return false;">ผ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ฝ'); return false;">ฝ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('พ'); return false;">พ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ฟ'); return false;">ฟ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ภ'); return false;">ภ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ม'); return false;">ม</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ย'); return false;">ย</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ร'); return false;">ร</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ล'); return false;">ล</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ว'); return false;">ว</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ศ'); return false;">ศ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ษ'); return false;">ษ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ส'); return false;">ส</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ห'); return false;">ห</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ฬ'); return false;">ฬ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('อ'); return false;">อ</a>
                        <a href="#" class="button-link" onclick="filterByLetter('ฮ'); return false;">ฮ</a>
                        <a href="#" class="button-link" onclick="filterByLetter(''); return false;">ทั้งหมด</a>
                    </div>




                    <h2 class="school-headertext pro">พันธมิตรร่วมเพาะพันธุ์ปัญญา : <span class="partnersTextinLine">วิทยากร</span> </h2>
                    {header_partner}

                    <div id="lecturer"></div>



                    <div id="grid-container-lecturer" class="grid-container"></div>
                    <div id="nodata-lecturer"></div>


                    <br><br>
                    <h2 class="school-headertext pro">พันธมิตรร่วมเพาะพันธุ์ปัญญา : <span class="partnersTextinLine">คณะกรรมการ</span></h2>
                    <br><br>
                    <div id="committee"></div>

                    <div id="grid-container-committee" class="grid-container"></div>
                    <div id="nodata-committee"></div>



                    <br>
                </div>
            </div>
            <div style="height: 50px;"></div>
        </div>

<!-- START BLOCK : TAB -->
        <div data-w-tab="Tab {tabID}" class="tabpane w-tab-pane">


            <div class="partnercontainer">
            <!-- START BLOCK : SPEAKER -->

            <p class="partnersubhead">{campHead}</p>
            <h2 class="partnersubkey">{campSubHead}</h2>
            <div class="container-grid">
            <div class="speaker-grid">
                <!-- START BLOCK : TEACHER -->
                <div>
                    <img src="{photo}" loading="lazy" alt="{FullName}">
                <div>
                    <h3 class="partnername">{FullName}</h3>
                    <p class="partnersubtext plus">{Subtext}</p>
                    {iconPack}  
                </div>
                </div>
                <!-- END BLOCK : TEACHER -->
            </div>
            </div>
            {HL}
            <!-- END BLOCK : SPEAKER -->

            </div>



            <div class="sectionpicker" style="background-color:var(--picker);padding-top: 50px;">
            <!-- START BLOCK : COMMITTEE -->
            <p class="partnersubhead">{campHead}</p>
            <h2 class="partnersubkey">{campSubHead}</h2>
            <div class="container-grid">
            <div class="speaker-grid">
                <!-- START BLOCK : TEACHER2 -->
                <div>
                    <img src="{photo}" loading="lazy" alt="{FullName}">
                <div>
                    <h3 class="partnername">{FullName}</h3>
                    <p class="partnersubtext plus">{Subtext}</p>
                    {iconPack}  
                </div>
                </div>
                <!-- END BLOCK : TEACHER2 -->
            </div>
            </div>
            {HL}
            <!-- END BLOCK : COMMITTEE -->
            </div>

        </div>
<!-- END BLOCK : TAB -->


    </div>
</div>

<script>
    // เมื่อหน้าโหลดเสร็จ
    window.onload = function() {
        // ตรวจสอบว่ามีแฮชใน URL หรือไม่
        if (window.location.hash) {
            const targetElement = document.querySelector(window.location.hash);
            if (targetElement) {
                // เลื่อนไปที่เป้าหมาย และชิดขอบบน
                targetElement.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        }
    };
</script>
<script>
    // ฟังก์ชันสำหรับการกรองข้อมูลตามตัวอักษร
    function filterByLetter(letter) {
        loadPartnersByLetter('วิทยากร', letter);
        loadPartnersByLetter('กรรมการ', letter);
    }

    // ฟังก์ชันโหลดข้อมูลจาก PHP ตามหมวดหมู่และตัวอักษร
    function loadPartnersByLetter(role, letter) {
        const requestData = {
            role: role,
            letter: letter
        };

        // ใช้ fetch เพื่อส่งข้อมูลแบบ POST
        fetch('loadPartners.php', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(requestData)
            })
            .then(response => response.json())
            .then(data => {
                let gridContainer;
                let noDataContainer;

                // ตรวจสอบหมวดหมู่
                if (role === 'วิทยากร') {
                    gridContainer = document.getElementById('grid-container-lecturer');
                    noDataContainer = document.getElementById('nodata-lecturer');
                } else if (role === 'กรรมการ') {
                    gridContainer = document.getElementById('grid-container-committee');
                    noDataContainer = document.getElementById('nodata-committee');
                }

                // ล้างข้อมูลเก่า
                gridContainer.innerHTML = '';
                noDataContainer.innerHTML = '';

                if (data.length > 0) {
                    // วนลูปข้อมูลและแสดงผล
                    data.forEach(partner => {
                        const gridItem = document.createElement('div');
                        gridItem.classList.add('grid-item');
                        const link = document.createElement('a');
                        link.classList.add('partnerlightbox', 'w-inline-block', 'w-lightbox');
                        link.href = "#";
                        link.setAttribute('aria-label', 'open lightbox');
                        link.setAttribute('aria-haspopup', 'dialog');

                        const img = document.createElement('img');
                        img.src = `./upload/` + partner.year + `/teachers/alumni/` + partner.photo_aln;
                        img.loading = "lazy";
                        img.alt = `คุณ ` + partner.fname + ` ` + partner.lname;

                        link.appendChild(img);

                        const script = document.createElement('script');
                        const popUrl = "./upload/" + partner.year + "/teachers/popup/" + partner.profile_pop;
                        script.type = 'application/json';
                        script.classList.add('w-json');
                        script.textContent = JSON.stringify({
                            items: [{
                                origFileName: partner.profile_pop,
                                fileName: partner.profile_pop,
                                fileSize: 222311,
                                url: popUrl,
                                caption: partner.fname,
                                type: 'image'
                            }],
                            group: partner.fname
                        });

                        link.appendChild(script);
                        gridItem.appendChild(link);
                        gridContainer.appendChild(gridItem);
                    });

                    // เรียกใช้งาน lightbox ใหม่หลังจากอัพเดต DOM แล้ว
                    window.Webflow.require('lightbox').ready();
                } else {
                    // ถ้าไม่มีข้อมูล ให้แสดงภาพ "nodata.png"
                    const img = document.createElement('img');
                    img.src = './images/nodata.png';
                    img.style.width = '100%'; // ปรับขนาดให้เต็มความกว้าง
                    noDataContainer.appendChild(img);
                }
            })
            .catch(error => {
                console.error('Error fetching data:', error);
            });
    }

    // โหลดข้อมูลเริ่มต้นเมื่อหน้าเว็บโหลด (เริ่มที่ทั้งหมด)
    document.addEventListener('DOMContentLoaded', function() {
        loadPartnersByLetter('วิทยากร', ''); // โหลดข้อมูลทั้งหมดของวิทยากร
        loadPartnersByLetter('กรรมการ', ''); // โหลดข้อมูลทั้งหมดของกรรมการ
    });
</script>
<link rel="stylesheet" href="css/partners.css">
